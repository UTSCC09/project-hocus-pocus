FROM node:lts-alpine

WORKDIR /app

COPY package.json ./
RUN npm install
COPY . ./

ARG PORT
ARG MONGO_USER
ARG MONGO_PASSWORD
ARG MONGO_DB
ARG JWT_SECRET

ENV PORT=${PORT}
ENV MONGO_USER=${MONGO_USER}
ENV MONGO_PASSWORD=${MONGO_PASSWORD}
ENV MONGO_DB=${MONGO_DB}
ENV JWT_SECRET=${JWT_SECRET}

EXPOSE ${PORT}
CMD ["npm", "start"]